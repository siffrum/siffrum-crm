<div class="fp-page grain bg-grid">
  <!-- background blobs -->
  <div class="blob blob-a" aria-hidden="true"></div>
  <div class="blob blob-b" aria-hidden="true"></div>
  <div class="blob blob-c" aria-hidden="true"></div>

  <div class="fp-shell">
    <!-- Left info -->
    <section class="fp-hero enter-left hide-on-short">
      <div class="pill">
        <span class="pill-dot"></span>
        Password Recovery <span class="pill-sep">•</span> Secure flow
      </div>

      <h1 class="hero-title">
        Forgot your password?<br />
        <span class="hero-gradient">We’ll help you reset it.</span>
      </h1>

      <p class="hero-sub">
        Enter your username and we’ll send instructions to reset your password.
      </p>

      <div class="quote">
        <div class="quote-icon">“</div>
        <div>
          <p class="quote-text">Clarity is a feature. Reduce decisions, reduce errors.</p>
          <p class="quote-author">— OPERATIONS PRINCIPLE</p>
        </div>
      </div>
    </section>

    <!-- Right form card -->
    <section class="fp-cardWrap enter-right">
      <div class="fp-card">
        <div class="top-hairline"></div>

        <div class="head">
          <div>
            <div class="kicker">Password reset</div>
            <h2 class="title">Forgot Password</h2>
            <p class="subtitle">Enter your username to receive a reset link.</p>
          </div>

          <a routerLink="/login" class="closeBtn" aria-label="Back to login">✕</a>
        </div>

        <!-- SUCCESS (optional, only if you enable isSent in TS below) -->
        <div *ngIf="isSent" class="success">
          <div class="successIcon">✓</div>
          <div>
            <div class="successTitle">Instructions sent</div>
            <div class="successText">
              If the username is recognized, a reset link was sent successfully.
            </div>
          </div>
          <div class="successActions">
            <a routerLink="/login" class="btn primary">Return to sign in</a>
            <button type="button" class="btn ghost" (click)="isSent=false">Send again</button>
          </div>
        </div>

        <form *ngIf="!isSent" #forgotPasswordForm="ngForm" class="form">
          <label class="label">Username *</label>

          <div
            class="field"
            [ngClass]="{
              'field-invalid': (loginId.touched || viewModel.FormSubmitted) && loginId.invalid
            }"
          >
            <i class="bi bi-person-fill icon" aria-hidden="true"></i>

            <input
              type="text"
              name="loginId"
              placeholder="Enter Username"
              required
              [(ngModel)]="viewModel.forgotPasswordDetails.userName"
              class="input"
              #loginId="ngModel"
              autocomplete="username"
            />

            <span class="fieldGlow" aria-hidden="true"></span>
          </div>

          <ng-container *ngFor="let validation of viewModel.ValidationData.loginId">
            <div
              class="error"
              *ngIf="(loginId.touched || viewModel.FormSubmitted) && loginId.hasError(validation.type)"
            >
              {{ validation.message }}
            </div>
          </ng-container>

          <button
            type="button"
            class="btn primary shine"
            [disabled]="forgotPasswordForm.invalid"
            (click)="click_forgotPassword(forgotPasswordForm)"
          >
            <span>Send reset link</span>
            <span class="spinner" *ngIf="isLoading" aria-hidden="true"></span>
          </button>

          <button type="button" class="btn ghost" routerLink="/login">
            Back to sign in
          </button>

          <div class="foot">
            <span>Need help?</span>
            <a href="javascript:void(0)">Support</a>
          </div>
        </form>
      </div>
    </section>
  </div>
</div>
